
<tolltip-create-html></tolltip-create-html>

<pre> {{createTimeLineForm.value | json}}</pre>

<form [formGroup]="createTimeLineForm">
  <div formGroupName="time_line">
    <div formArrayName="flags" class="flag-modal ">

      <!-- Title h1 -->
      <!-- Let's talk about your flag -->
      <div class="flag-modal_title-h1">
        {{'TIME-LINE.CreateFlagComponent.CREATE-FLAG.modal.title-h1' | translate}}
        <!-- Custom ToolTip -->
        <i  class="material-icons-outlined cursor_pointer noSelect helpers_01"
            matSuffix
            customToolTip
            [contentTemplate]="template_help7"
            [originX]="'center'"
            [originY]="'bottom'"
            [overlayX]="'center'"
            [overlayY]="'top'"
            [offsetY]="5">
            help_outline
        </i>
        <ng-template #template_help7>
          <div  customToolTipChiel
                [innerHTML]="help1 | safeDomSanitizer: 'html'">
          </div>
        </ng-template>
      </div>


      <!-- title -->
      <div class="flag-modal_title" [formGroupName]="0">

        <!-- Flag name -->
        <mat-form-field class="">
          <mat-label>{{'TIME-LINE.CreateFlagComponent.CREATE-FLAG_MATERIAL.input.title.mat-label' | translate}}</mat-label>
          <input  type="text"
                  #flagTitle
                  maxlength="50"
                  matInput
                  [placeholder]="'TIME-LINE.CreateFlagComponent.CREATE-FLAG_MATERIAL.input.title.placeholder'| translate"
                  formControlName="flag_title"
                  [errorStateMatcher]="matcher"
                  appTrim
                  [numInputAppTrim]="4"
                  [formAll]="flagsForm.controls[0]"
                  [nameFormAll]="'flag_title'"
                  >
          <mat-hint align="end">{{flagTitle.value.length}}/50</mat-hint>
          <mat-error *ngIf="flagsForm.controls[0].get('flag_title')?.errors?.['minlength']">
            <!-- Minimum 3 characters -->
            {{'TIME-LINE.CreateFlagComponent.CREATE-FLAG_MATERIAL.input.title.mat-error-minlength' | translate}}
          </mat-error>
          <mat-error *ngIf="flagsForm.controls[0].get('flag_title')?.errors?.['maxLength'] || flagTitle.value.length > 50">
            <!-- Maximum 50 characters -->
            {{'TIME-LINE.CreateFlagComponent.CREATE-FLAG_MATERIAL.input.title.mat-error-maxlength' | translate}}
          </mat-error>
          <mat-error *ngIf="flagsForm.controls[0].get('flag_title')?.errors?.['required'] && flagTitle.value.length === 0">
            <!-- Title is required -->
            {{'TIME-LINE.CreateFlagComponent.CREATE-FLAG_MATERIAL.input.title.mat-error-required' | translate}}
          </mat-error>
        </mat-form-field>
      </div>


      <!-- Date (ngModelChange)="test($event)" -->
      <!-- https://github.com/JsDaddy/ngx-mask -->
      <!-- mask="d0/M0/0000" -->
      <div class="flag-modal_date" [formGroupName]="0">
        <mat-form-field formGroupName="date_obj">
          <!-- Flag date -->
          <mat-label>{{'TIME-LINE.CreateFlagComponent.CREATE-FLAG_MATERIAL.input.date.mat-label' | translate}} </mat-label>
            <!-- Custom ToolTip -->
            <i  class="material-icons-outlined cursor_pointer noSelect helpers_02 flag-modal_date--help"
                matSuffix
                customToolTip
                [contentTemplate]="template_help2"
                [originX]="'center'"
                [originY]="'bottom'"
                [overlayX]="'center'"
                [overlayY]="'top'"
                [offsetY]="5">
                help_outline
            </i>
          <ng-template #template_help2>
            <div  customToolTipChiel
                  [innerHTML]="help2 | safeDomSanitizer: 'html'">
            </div>
          </ng-template>
          <!-- (dateInput)="addEvent('input', $event)"  -->
          <!-- (dateChange)="addEvent('change', $event)" -->
          <!-- (keyup)="toTimestamp(dateInput.value)" -->
          <!-- (dateInput)="addEventDatePicker(dateInput.value, $event)" -->
          <input  formControlName="day_month_year"
                  #dateInput
                  [min]="minDate"
                  appMaskDate
                  [appMaskValue]="dateInput.value"
                  matInput
                  type="text"
                  maxlength="10"
                  minlength="9"
                  [matDatepicker]="picker"
                  [errorStateMatcher]="matcher"
                  [placeholder]="'TIME-LINE.CreateFlagComponent.CREATE-FLAG_MATERIAL.input.date.placeholder'| translate"
                  >
          <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
          <mat-datepicker #picker
                          [calendarHeaderComponent]="timeHeader"
                          (closed)="toggleDatePicker(picker)"
                          (opened)="toggleDatePicker(picker)"
                           >
          </mat-datepicker>
          <mat-error  *ngIf="flagsForm.controls[0]?.get('date_obj')?.get('date_origin')?.errors?.['required'] &&
                              dateInput.value.length === 0; else nameDate">
            <!-- Date is required -->
            {{'TIME-LINE.CreateFlagComponent.CREATE-FLAG_MATERIAL.input.date.mat-error-required' | translate}}
          </mat-error>

          <ng-template #nameDate>
            <mat-error *ngIf="flagsForm.controls[0]?.get('date_obj')?.get('date_origin')?.errors &&
                              dateInput.value.length > 2 ">
              <!-- Invalid date -->
              {{'TIME-LINE.CreateFlagComponent.CREATE-FLAG_MATERIAL.input.date.mat-error' | translate}}
            </mat-error>
          </ng-template>
        </mat-form-field>
      </div>


      <!-- Description -->
      <div class="flag-modal_description" [formGroupName]="0">
        <mat-form-field [style.fontSize]="'1.4rem'">
          <!-- Description -->
          <mat-label>{{'TIME-LINE.CreateFlagComponent.CREATE-FLAG_MATERIAL.input.description.mat-label' | translate}} </mat-label>
          <textarea [placeholder]="'TIME-LINE.CreateFlagComponent.CREATE-FLAG_MATERIAL.input.description.placeholder'| translate"
                    matInput
                    type="text"
                    #textareaInput
                    cdkTextareaAutosize
                    #autosize="cdkTextareaAutosize"
                    cdkAutosizeMinRows="1"
                    cdkAutosizeMaxRows="15"
                    maxlength="500"
                    [errorStateMatcher]="matcher"
                    formControlName="flag_description"
                    appTrim
                    [numInputAppTrim]="5"
                    [formAll]="flagsForm.controls[0]"
                    [nameFormAll]="'flag_description'"

                    >
          </textarea>
          <mat-hint align="end">{{textareaInput.value.length}}/500</mat-hint>
          <!-- Description is required -->
          <mat-error *ngIf="flagsForm.controls[0].get('flag_description')?.errors?.['required'] ">
            {{'TIME-LINE.CreateFlagComponent.CREATE-FLAG_MATERIAL.input.description.mat-error-required' | translate}}
          </mat-error>
          <!-- Minimum 3 characters -->
          <mat-error *ngIf="flagsForm.controls[0].get('flag_description')?.errors?.['minlength'] && textareaInput.value.length > 0">
            {{'TIME-LINE.CreateFlagComponent.CREATE-FLAG_MATERIAL.input.description.mat-error-minlength' | translate}}
          </mat-error>
          <!-- Maximum 500 characters -->
          <mat-error *ngIf="flagsForm.controls[0].get('flag_description')?.errors?.['maxLength'] || textareaInput.value.length > 500">
            {{'TIME-LINE.CreateFlagComponent.CREATE-FLAG_MATERIAL.input.description.mat-error-maxlength' | translate}}
          </mat-error>
        </mat-form-field>
      </div>

      <!-- RADIO COR TEXTO -->
      <div class="flag-modal_radio">
        <div class="flag-modal_radio--text">
          Cor do texto
        <!-- Custom ToolTip -->
        <i  class="material-icons-outlined cursor_pointer noSelect helpers_01"
            matSuffix
            customToolTip
            [contentTemplate]="template_help3"
            [originX]="'center'"
            [originY]="'bottom'"
            [overlayX]="'center'"
            [overlayY]="'top'"
            [offsetY]="5">
            help_outline
        </i>
      <ng-template #template_help3>
        <div  customToolTipChiel
              [innerHTML]="help1 | safeDomSanitizer: 'html'">
        </div>
      </ng-template>
        </div>
        <mat-radio-group class=""
        (change)="onRadioButtonTextColor($event)"  [(ngModel)]="radioRedeTextColor" [ngModelOptions]="{standalone: true}" >
          <mat-radio-button [value]="'0,0,0'" class="flag-modal_radio--colors" >
            <!-- Black-->
            1
          </mat-radio-button>
          <mat-radio-button [value]="'255,255,255'" class="flag-modal_radio--colors" >
            <!-- White-->
            2
          </mat-radio-button>
          <mat-radio-button [value]="'255,0,0'" class="flag-modal_radio--colors" >
            <!-- Red-->
            3
          </mat-radio-button>
          <mat-radio-button [value]="'0,0,255'" class="flag-modal_radio--colors" >
            <!-- blue -->
            4
          </mat-radio-button>
          <mat-radio-button [value]="'255,255,0'" class="flag-modal_radio--colors" >
            <!-- Yellow -->
            5
          </mat-radio-button>
        </mat-radio-group>
      </div>


      <!-- RADIO COR REDES FUNDO -->
      <div class="flag-modal_radio">
        <div class="flag-modal_radio--text">
          Cor contraste redes
        <!-- Custom ToolTip -->
        <i  class="material-icons-outlined cursor_pointer noSelect helpers_01"
            matSuffix
            customToolTip
            [contentTemplate]="template_help4"
            [originX]="'center'"
            [originY]="'bottom'"
            [overlayX]="'center'"
            [overlayY]="'top'"
            [offsetY]="5">
            help_outline
        </i>
      <ng-template #template_help4>
        <div  customToolTipChiel
              [innerHTML]="help1 | safeDomSanitizer: 'html'">
        </div>
      </ng-template>
        </div>
        <mat-radio-group class=""
        (change)="onRadioButtonNetsColor($event)"  [(ngModel)]="radioRedeNets" [ngModelOptions]="{standalone: true}" >
          <mat-radio-button [value]="'1'" class="flag-modal_radio--colors" >
            <!-- {background: '74,74,74', text: '255,255,255'} -- {background: 'black', text: 'white'} -->
            1
          </mat-radio-button>
          <mat-radio-button [value]="'2'" class="flag-modal_radio--colors" >
            <!-- {background: '255,255,255', text: '74,74,74'} --- {background: 'white', text: 'black'} -->
            2
          </mat-radio-button>
          <mat-radio-button [value]="'3'" class="flag-modal_radio--colors" >
            <!-- {background: '74,74,74', text: '255,0,0'} --- {background: 'black', text: 'red'} -->
            3
          </mat-radio-button>
          <mat-radio-button [value]="'4'" class="flag-modal_radio--colors" >
            <!-- {background: '255,0,0', text: '255,255,255'} -- {background: 'red', text: 'white'} -->
            4
          </mat-radio-button>
          <mat-radio-button [value]="'5'" class="flag-modal_radio--colors" >
            <!-- {background: '74,74,74', text: '255,255,0'} --- {background: 'black', text: 'yellow'} -->
            5
          </mat-radio-button>
        </mat-radio-group>
      </div>

      <!-- RADIO COR DATA FUNDO -->
      <div class="flag-modal_radio">
        <div class="flag-modal_radio--text">
          Cor data fundo
        <!-- Custom ToolTip -->
        <i  class="material-icons-outlined cursor_pointer noSelect helpers_01"
            matSuffix
            customToolTip
            [contentTemplate]="template_help6"
            [originX]="'center'"
            [originY]="'bottom'"
            [overlayX]="'center'"
            [overlayY]="'top'"
            [offsetY]="5">
            help_outline
        </i>
      <ng-template #template_help6>
        <div  customToolTipChiel
              [innerHTML]="help1 | safeDomSanitizer: 'html'">
        </div>
      </ng-template>
        </div>
        <mat-radio-group class=""
        (change)="radioButtonDateColor($event)"  [(ngModel)]="radioButtonDate" [ngModelOptions]="{standalone: true}" >
          <mat-radio-button [value]="'144,171,64'" class="flag-modal_radio--colors" >
            <!-- Mesma cor bandeira -->
            1
          </mat-radio-button>
          <mat-radio-button [value]="'0,0,0'" class="flag-modal_radio--colors" >
            <!-- Black -->
            2
          </mat-radio-button>
          <mat-radio-button [value]="'255,255,255'" class="flag-modal_radio--colors" >
            <!-- White -->
            3
          </mat-radio-button>
          <mat-radio-button [value]="'255,0,0'" class="flag-modal_radio--colors" >
            <!-- Red -->
            4
          </mat-radio-button>
          <mat-radio-button [value]="'255,255,0'" class="flag-modal_radio--colors" >
            <!-- Yellow -->
            5
          </mat-radio-button>
        </mat-radio-group>
      </div>

      <!-- RADIO COR TRANSPARÊNCIA FUNDO -->
      <div class="flag-modal_radio">
        <div class="flag-modal_radio--text">
          Cor transparência bandeira
        <!-- Custom ToolTip -->
        <i  class="material-icons-outlined cursor_pointer noSelect helpers_01"
            matSuffix
            customToolTip
            [contentTemplate]="template_help5"
            [originX]="'center'"
            [originY]="'bottom'"
            [overlayX]="'center'"
            [overlayY]="'top'"
            [offsetY]="5">
            help_outline
        </i>
      <ng-template #template_help5>
        <div  customToolTipChiel
              [innerHTML]="help1 | safeDomSanitizer: 'html'">
        </div>
      </ng-template>
        </div>
        <mat-radio-group class=""
        (change)="onRadioButtonTransparencyColor($event)"  [(ngModel)]="radioRedeTransparency" [ngModelOptions]="{standalone: true}" >
          <mat-radio-button [value]="'0.1'" class="flag-modal_radio--colors" >
            1
          </mat-radio-button>
          <mat-radio-button [value]="'0.2'" class="flag-modal_radio--colors" >
            2
          </mat-radio-button>
          <mat-radio-button [value]="'0.3'" class="flag-modal_radio--colors" >
            3
          </mat-radio-button>
          <mat-radio-button [value]="'0.4'" class="flag-modal_radio--colors" >
            4
          </mat-radio-button>
          <mat-radio-button [value]="'0.5'" class="flag-modal_radio--colors" >
            5
          </mat-radio-button>
        </mat-radio-group>
      </div>


      <!-- color-picker -->
      <div class="flag-modal_color-picker" [formGroupName]="0">
        <mat-form-field class="input-color" floatPlaceholder="never" floatLabel="always" formGroupName="flag_design">
          <!-- Which color represents the flag? -->
          <mat-label>{{'TIME-LINE.CreateFlagComponent.CREATE-FLAG_MATERIAL.input.color.mat-label' | translate}} </mat-label>
          <!-- [disableControl]="disableColor" -->
          <input *ngIf="!disableColor"
                  matInput
                  placeholder=""
                  readonly
                  style="outline: none !important"
                  type="color"
                  formControlName="color_hex"
                  (input)="convertColor()"
                  class="">
          <input *ngIf="disableColor"
                  matInput
                  placeholder=""
                  [value]="flagsForm.controls[0].get('color_hex')?.value"
                  readonly
                  style="outline: none !important"
                  type="color"
                  disabled="true"
                  class="">
          <mat-error>
            error
          </mat-error>
        </mat-form-field>
      </div>



      <!-- BUTTON -->
      <div class="flag-modal_btn">

        <button mat-stroked-button

                class="btn_opt_transparent"
                matDialogClose>
          <!-- Back -->
          {{'TIME-LINE.CreateFlagComponent.CREATE-FLAG_MATERIAL.mat-stroked-button.button.back' | translate}}
        </button>


        <span>
          <button mat-stroked-button class="btn_opt-invalid" *ngIf="createTimeLineForm.invalid">
            <!-- Create flag -->
            {{'TIME-LINE.CreateFlagComponent.CREATE-FLAG_MATERIAL.mat-stroked-button.button.create' | translate}}
          </button>

          <button matDialogClose
                  type="submit"
                  *ngIf="createTimeLineForm.valid"
                  mat-stroked-button
                  class="btn_opt-valid"
                  >
              <!-- Create flag -->
            {{'TIME-LINE.CreateFlagComponent.CREATE-FLAG_MATERIAL.mat-stroked-button.button.create' | translate}}
          </button>
        </span>

      </div>


    </div>
  </div>
</form>
